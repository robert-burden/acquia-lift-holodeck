<!doctype html public "-//w3c//dtd html 4.01//en"
   "http://www.w3.org/tr/html4/strict.dtd">
<html>
<head>
    <title>L3H2017</title>
    <script src="decision-api.js"></script>
    <script>
      // Set up.
      var api = AcquiaLiftDecisionApi;
      var identitySource = 'email';
      var identity = 'yuan.xie.002@acquia.com';

      // Create captures.
      var indoorsUpdatePersonCapture = api.getCapture({
        'event_name': 'updatePerson',
        'event_source': 'Holodeck',
        'person_udf4': '30',
        'person_udf5': 'Male',
        'person_udf6': 'Cambridgeside Galleria Indoors'
      });

      var parkingLotUpdatePersonCapture = api.getCapture({
        'event_name': 'updatePerson',
        'event_source': 'Holodeck',
        'person_udf4': '30',
        'person_udf5': 'Male',
        'person_udf6': 'Cambridgeside Galleria Parking Lot'
      });

      var posterTagRecognitionCapture = api.getCapture({
        'event_name': 'Tag Recognition',
        'event_source': 'Holodeck',
        'event_udf3': '42.3601',
        'event_udf4': '71.0589',
        'event_udf5': 'Cambridgeside Galleria Indoors',
        'event_udf6': 'POSTER'
      });

      var posterAugmentedRealityActivatedCapture = api.getCapture({
        'event_name':'Augmented Reality Activated',
        'event_source':'Holodeck',
        'event_udf3':'42.3601',
        'event_udf4':'71.0589',
        'event_udf5':'Cambridgeside Galleria Indoors',
        'event_udf6':'POSTER'
      });

      var unicornFrappuccinoBuyCapture = api.getCapture({
        'event_name': 'Buy',
        'event_source': 'Holodeck',
        'event_udf3': '42.3601',
        'event_udf4': '71.0589',
        'event_udf5': 'Cambridgeside Galleria Indoors',
        'event_udf6': 'POSTER',
        'event_udf7': 'Unicorn Frappuccino'
      });

      var shirtTagRecognitionCapture = api.getCapture({
        'event_name': 'Tag Recognition',
        'event_source': 'Holodeck',
        'event_udf3': '42.3601',
        'event_udf4': '71.0589',
        'event_udf5': 'Cambridgeside Galleria Indoors',
        'event_udf6': 'TSHIRT'
      });

      var shirtAugmentedRealityActivatedCapture = api.getCapture({
        'event_name':'Augmented Reality Activated',
        'event_source':'Holodeck',
        'event_udf3':'42.3601',
        'event_udf4':'71.0589',
        'event_udf5':'Cambridgeside Galleria Indoors',
        'event_udf6':'TSHIRT'
      });

      var shirtCartAbandonCapture = api.getCapture({
        'event_name':'Cart Abandon',
        'event_source':'Holodeck',
        'event_udf3':'42.3601',
        'event_udf4':'71.0589',
        'event_udf5':'Cambridgeside Galleria Parking Lot',
        'event_udf6':'TSHIRT',
        'event_udf7':'Drupal T Shirt'
      });

      var shirtBuyCapture = api.getCapture({
        'event_name':'Buy',
        'event_source':'Holodeck',
        'event_udf3':'42.3601',
        'event_udf4':'71.0589',
        'event_udf5':'Cambridgeside Galleria Parking Lot',
        'event_udf6':'TSHIRT',
        'event_udf7':'Drupal T Shirt'
      });

      // Get a decision (while posting captures).
      var readStarbucksPosterAction = api.getPayload('starbucks', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [indoorsUpdatePersonCapture,posterTagRecognitionCapture]
      });

      var activatedStarbucksArAction = api.getPayload('starbucks', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [posterAugmentedRealityActivatedCapture]
      });

      var buyStarbucksCoffeeAction = api.getPayload('starbucks', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [unicornFrappuccinoBuyCapture]
      });

      var readShirtAction = api.getPayload('meeting', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [shirtTagRecognitionCapture]
      });

      var activatedShirtArAction = api.getPayload('meeting', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [shirtAugmentedRealityActivatedCapture]
      });

      var abandonBuyShirtAction = api.getPayload('meeting', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [shirtCartAbandonCapture]
      });

      var parkingLotUpdatePersonCapture = api.getPayload('car', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [parkingLotUpdatePersonCapture]
      });

      var buyShirtAction = api.getPayload('car', {
        'identity_source':identitySource,
        'identity':identity,
        'captures': [shirtBuyCapture]
      });

      // Decides.
      api.decide(readStarbucksPosterAction);
      api.decide(activatedStarbucksArAction);
      api.decide(buyStarbucksCoffeeAction);
      api.decide(readShirtAction);
      api.decide(activatedShirtArAction);
      api.decide(abandonBuyShirtAction);
      api.decide(parkingLotUpdatePersonCapture);
      api.decide(buyShirtAction);
    </script>
</head>
<body>
    <p id="text-display">pending response ...</p>
</body>
</html>
